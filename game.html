<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Arina Run</title>
  <style>
    body { margin: 0; overflow: hidden; background: #000; }
    canvas { display: block; margin: 0 auto; background: #111; }
  </style>
</head>
<body>
  <canvas id="gameCanvas" width="800" height="400"></canvas>
  <script>
    // Инициализация
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const WIDTH = canvas.width;
    const HEIGHT = canvas.height;

    // Загрузка изображений
    const arina = new Image(); arina.src = 'image.png';
    const rail = new Image(); rail.src = 'pngtree-clothes-on-a-rack-buy-picture-image_13151407.png';
    const money = new Image(); money.src = 'Dollar-Money-PNG-Image.png';

    // Размеры предметов
    const obstacleSize = { w: 80, h: 60 };
    const collectibleSize = { w: 50, h: 50 };

    // Параметры героя
    const player = { x: 50, y: HEIGHT - 80, w: 60, h: 60, vy: 0, gravity: 1.2, jumpPower: -15 };
    let obstacles = [];
    let collectibles = [];
    let frame = 0;

    // Обработчик прыжка
    document.addEventListener('keydown', e => {
      if (e.code === 'Space' && player.y >= HEIGHT - player.h - 5) {
        player.vy = player.jumpPower;
      }
    });

    // Обновление игры
    function update() {
      frame++;
      // Гравитация
      player.vy += player.gravity;
      player.y = Math.min(player.y + player.vy, HEIGHT - player.h - 5);

      // Создание препятствий
      if (frame % 120 === 0) {
        obstacles.push({
          x: WIDTH,
          y: HEIGHT - obstacleSize.h - 5,
          w: obstacleSize.w,
          h: obstacleSize.h
        });
      }
      // Создание коллектиблов (деньги ниже)
      if (frame % 180 === 0) {
        collectibles.push({
          x: WIDTH,
          y: Math.random() * 50 + (HEIGHT - 150), // между 250 и 300
          w: collectibleSize.w,
          h: collectibleSize.h
        });
      }

      // Сдвигаем объекты
      obstacles = obstacles.map(o => ({ x: o.x - 4, ...o })).filter(o => o.x + o.w > 0);
      collectibles = collectibles.map(c => ({ x: c.x - 4, ...c })).filter(c => c.x + c.w > 0);

      // В будущем можно добавить столкновения и сбор
    }

    // Отрисовка игры
    function draw() {
      ctx.clearRect(0, 0, WIDTH, HEIGHT);
      // Герой
      ctx.drawImage(arina, player.x, player.y, player.w, player.h);
      // Рельсы (препятствия)
      obstacles.forEach(o => ctx.drawImage(rail, o.x, o.y, o.w, o.h));
      // Деньги (коллектиблы)
      collectibles.forEach(c => ctx.drawImage(money, c.x, c.y, c.w, c.h));
    }

    // Игровой цикл
    function loop() {
      update();
      draw();
      requestAnimationFrame(loop);
    }

    // Запуск после загрузки
    Promise.all([arina.decode(), rail.decode(), money.decode()]).then(loop);
  </script>
</body>
</html>
